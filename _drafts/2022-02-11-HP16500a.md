---
layout: post
title: HP 16500A Logic Analyzer Teardown
date:  2022-01-29 00:00:00 -1000
categories:
---

* TOC
{:toc}

# Introduction

I recently became the proud owner of an HP 16500A logic analyzer for the low low price of $20.

![Logic Analyzer on Cart](/assets/hp16500a/blog/1_logic_analyzer_on_cart.jpg)

Or better, I'm now the owner of **two** HP 16500A logic analyzers, because the seller had a
whole pallet of them, and when you have a spare, you can afford to take more risks while
experimenting with them. The second one even came with an HP keyboard and mouse.

![Logic Analyzer on Cart with Cables and Keyboard](/assets/hp16500a/blog/1b_logic_analyzer_on_cart.jpg)

It's a mainframe design, with a 6 slot backplane that contains a Motorola 68000 based CPU system board
and 5 additional slots for various plug-in measurement cards. My 2 units 
came with an HP 16510A: an 80 channel 25MHz/100MHz digital acquisition card with a 4K 
acquisition depth, but higher performance cards exist. 

The logic analyzer functionality itself is not particularly useful for me: 
I never need to record that many channels in parallel, the acquisition depth is pathetic, 
the maximum sample rate is too low, and it's not trivial to get data of the machine for later analysis, 
because you need either use a non-standard floppy drive or the GPIB interface. It's also a huge, heavy 
beast that's impractical to move around on a bench, and you can't even disconnect the unwieldy
measurement cables that you don't use.

In short, this unit is worse in almost any respect than the [Saleae Logic Pro 16](https://www.saleae.com) 
that I use at work.

But it's always fun to take a vintage piece of electronics apart just for the sake
of it, learn about its special features, and maybe come up with some interesting
future project ideas?

So in this blog post, I'll take whole thing apart and try to figure out how what makes
it tick.

# Safety First

Before opening and working on this machine, it's import talk about safety: 

**WORKING ON SOMETHING LIKE THIS COULD KILL YOU.** 

There, I’ve said it. So, please, if you're not familiar with devices like this,
just read this blog for entertainment and don't try to reproduce my results.
If you decide to do it anyway, you do so at your risk, and take a number of 
basic precautions:

* **Read the [HP 16500A][HP 16500A Service Manual] and the [Sony CHM-9001-00][CHM-9001 Service Manual] 
  service manuals.** They are authoritative, unlike the scrappy blog of some electronics hobbyist.
* **Unplug the AC power cable** before you start going at it with a screw driver.
* **Wait 5 minutes after unplugging the AC power cable**: the power supply unit of an HP 16500A 
  has a lot of large capacitors and does not have bleeder resistors to quickly discharge 
  them after power is removed.
* **The power switch on the front panel is not in fact a power switch.** It merely puts the device in a
  standby low(er) power state. There is a real power switch at the back of the device.
* **The HP 16500A power supply unit creates 120V DC to power the CRT module**. Most power supply 
  units only create relatively low DC voltages, this one does not. Be extra careful.
* **CRT tubes require very high voltages**. I’m not totally sure about this one, but the CRT 
  schematic has annotations of 800V. 
* **Be extra careful about dropping screws.** There are a lot of them. If one drops, get it 
  out before moving on to the next one. You don't want specialty fireworks due to a screw
  induced short circuit!
* If you want to switch on the device while the covers are removed, **tape some 
  cardboard on top of the CRT unit** to prevent accidentally touching the high voltage parts.
* **Never do any measurements inside the bowels of the CRT module** when it’s powered on. 
  Sony provided a lot of measurement test points on the outside PCBs. There is absolutely 
  no need to get inside.
* **Have a clean workspace.** My bench is usually a horrible mess, but I unclutter it for 
  projects like this.

# Powering it up

*Taking pictures of running CRT screen is a pain, and they generally look terrible. Just assume that
whatever you see here will look much better in real life.*

After powering up the device, you should see a boot screen like this:

![Boot Screen](/assets/hp16500a/blog/2_bootup_screen.jpg)

The HP 16500A has 2 floppy drives, one in the front and one in the back, and other than some 
boot EPROMs, it has no other means to store its system software. So in practice you'll always
keep a system disk in the rear floppy drive. The floppy drive is not compatible with standard
drives from the mid eighties: it's a special 600RPM Sony drive.

# Disassembly Tools

I've opened 
[plenty](/2021/04/15/Agilent-E3631A-Knob-Repair.html) of 
[test](/2020/06/27/In-the-Lab-Tektronix-TDS420A.html) and 
[measurement](/2021/11/26/HP3478A-Multimeter-Repair-with-a-Hacksaw.html)
devices before, and so far, all I needed where regular
flat-head, Philips, and hexagonal screw drivers. Not so for the HP16500A: it uses Torx 10, 15,
and 20 screws everywhere. And even if you already have some Torx heads that plug into a 
generic screwdriver, you still won't be able to open up the logic analyzer.

That's because you can't remove any of the 4 enclosing side panels without removing 4 feet
at the back and each of those 4 feet has a Torx 10 screw sunken deep inside a narrow hole. 

![4 feet at the back of the logic analyzer](/assets/hp16500a/blog/3_back_with_4_feet.jpg)

The only way to get to it was with a dedicated, narrow, Torx screw driver, not a generic
one with exchangable heads.

![Trox 10 screwdriver sunk into a feet](/assets/hp16500a/blog/4_sunken_screwdriver.jpg)

One of the benefits of having many projects going on in parallel is that you can switch
to something else while an order for tools is on its way. 

![Set of Torx screwdrivers](/assets/hp16500a/blog/5_set_of_torx_screwdrivers.jpg)

*If you're going the route of buying a set, do yourself a favor and buy **security** Torx 
screwdrivers: they fit in the same holes are regular ones, but have an additional axial hole for security
Torx screws, which will allow you, hypothetically, to remove somebody's Ring camera from their
front door.*

# Tearing Down the Logic Analyzer

Section VI of the service manual explains how to take the whole device apart to replace pretty 
much all larger components in case of failure. It's not particularly difficult to open it up,
but I have a bit of tradition of showing too much of the disassembly process than too little, 
and I'm not going to stop that here.

**Remove plug-in cards and empty slot covers**

Let's start with that, because it's easy and all these annoying cables won't be in the way anymore.

Note that it's not possible to remove the CPU system card at the bottom, because not only does
the left bottom foot blocks it from sliding out, but also because a few flat cables,
accessible after removal of the bottom panel, must be unplugged first.

![Remove plug-in cards](/assets/hp16500a/blog/6_remove_plug_in_cards.jpg)

Here is the removed HP 16510A acquistion card:

![HP 16510A acquisition card](/assets/hp16500a/blog/7_16510a_acquisition_card.jpg)

These 5 heatsinks probably cover some custom ASICs, and are thus a bit of dead-end. I'll
leave them be. 

**Remove the 4 feet in the back**

![4 feet at the back of the logic analyzer](/assets/hp16500a/blog/3_back_with_4_feet.jpg)

Yes, this is the same picture as above!

**Remove 3 back panel retention screws**

There isn't a 4th screw, because one side panels has a carrying handle and screws to keep in place.

![3 back panel retention screws](/assets/hp16500a/blog/8_back_panel_screws.jpg)

Whenever possible, I tape the screws to the place where they came from. That makes it 
much easier to assemble thing back together later.

![screw taped to the top panel next to the screw hole](/assets/hp16500a/blog/9_tape_screws_where_they_belong.jpg)

**Remove the handle from the side panel**

![side panel with handle](/assets/hp16500a/blog/10_side_panel_with_handle.jpg)

A friend gave me rolling equipment cart. These things are amazing when you need to remove screws 
from all sides of a 40 pounds heavy box.

**Remove the top and side panels**

We can now remove the panels. You can slide each of the 4 panels from the front to the back,
but there can be quite a bit of friction. The easiest way is to remove the top panel first. 

Insert a flathead screwdriver in the gap between the back of the top panel and the back of the power
supply unit and rotate the screwdriver until the panel comes loose.

![Use screwdriver to loosen top panel](/assets/hp16500a/blog/11_use_screwdriver_to_loosen_top_panel.jpg)

Once loose, you can now easily slide out the top panel.

![Sliding out the top panel](/assets/hp16500a/blog/12_slide_out_top_panel.jpg)

Since we already removed their back screws, the side panels can now slide out too. 

You'll be greeted by the following sight:

![Top of the logic analyzer exposed](/assets/hp16500a/blog/13_top_of_logic_analyzer_exposed.jpg)

We can see a huge power supply, the front and back floppy drives, and the CRT unit.

All of these will come out soon.

**Remove the bottom panel**

Let's turn the unit on its side and slide out the bottom panel.

![Bottom of the logic analyzer exposed](/assets/hp16500a/blog/14_bottom_of_logic_analyzer_exposed.jpg)

We now have access to all the main components.

**Remove the CPU controller board**

The video cable and the floppy drive cable are the only ones that connect directly to the CPU controller 
board. They're much easier to unplug now that the back panel has been removed. I also unplugged the 
frontpanel cable and the orange cooling fan control cable, but that's not necessary to remove the CPU board.

![Unplug CPU board cables](/assets/hp16500a/blog/15_unplug_cpu_board_cables.jpg)

After removing the 2 screws in the back that secure the CPU board, we can slide it out. It looks really nice. 
Let's put it aside for now. We'll check it out more in detail later.

![CPU board removed](/assets/hp16500a/blog/16_cpu_board_removed.jpg)

The whole chassis starting to look pretty empty already, but we're far from being
done!

![Looks from the side](/assets/hp16500a/blog/17_look_from_the_side.jpg)

**Remove the front floppy drive**

The front floppy drive blocks the exit of the power supply board. We can take it out
by removing the 2 screws that are on the retaining bracket. (The second screw is
hidden underneath the flat cable.)

![Front floppy drive screws](/assets/hp16500a/blog/18_floppy_drive_bracket.jpg)

**Remove the power supply unit**

Getting the power supply unit out of the chassis is a bit more complicated. 

There's a backplate screwed to the power supply with 3 screws:

![Power supply back screws](/assets/hp16500a/blog/19_power_supply_back_screws.jpg)

On top, there are 2 screws that fix the power supply to the back frame, and 
2 screws that are hidden below the black safety cover.

It's not strictly necessary, but I also removed the 4 screws at the top to
take off the safety cover itself, so that I could have a better look at the 
components of the power supply itself.

**There is supposed to be Kapton tape over the 4 screws that hold the cover in
place. Make sure to put that tape back when you reassemble the logic analyzer,
because there's a live voltage on those screws and they could make contact with
the metal enclosure!!!**

![Power supply top screws](/assets/hp16500a/blog/20_power_supply_top_screws.jpg)

Now is also a good time to disconnect the CRT cable. It carries the 120V power for the
CRT as well as the degauss signal that goes to a switch that's located on the back of the
power supply.

At first, the power supply cable seems surprisingly flimsy to carry the power of a CRT.
But keep in mind that the thickness of a power cable is primarily determined by the current
that must go through it, not the power. With a peak power of 60W, the supply voltage of 120V
results in maximum current of only 0.5A. You don't need a thick cable for that.

![CRT power connector](/assets/hp16500a/blog/21_crt_power_connector.jpg)

You can now disconnect the whole power supply from the backplane PCB by sliding it
back by about a centimeter.

![Slide back power supply](/assets/hp16500a/blog/22_slide_back_power_supply.jpg)

The power supply is held in place by teeth of a back plate the slide into plastic retaining
slits. Once you moved the power supply back in the previous step, you should be able to
lift the power supply out of the chassis. It's a little bit tricky.

It's a beast of a power supply that's mounted on a heavy metal backplate.

![Remove back power supply](/assets/hp16500a/blog/23_remove_power_supply.jpg)

**Front panel removal**

The front panel contains a cool optical touch screen sensor. I definitely want to take
a look at that, so off it goes.

At the top of the front panel, there's a gray strip that covers 7 screws. The strip can
easily be removed with a narrow flat-head screwdriver. There are also 7 screws at the bottom.

![Front panel top row cover and screws](/assets/hp16500a/blog/24_front_panel_top_row_screws.jpg)

After removing all 14 screws, the front panel is loose, but it will still be connected to the
chassis with an interface controls flatcable to goes to the backplane PCB, and with a
contract and brightness cable that goes to the CRT. Unplug them too.

![Front panel cables](/assets/hp16500a/blog/25_front_panel_cables.jpg)

The front panel has metal shielding around it. You can simply remove it.

![Disconnected front panel with metal shielding](/assets/hp16500a/blog/26_front_panel_with_metal_shielding.jpg)

We can now have a good look at the internals of the user controls: rotary encoder, 2 potentiometers for
brightness and contrast control, and, of course, rows and columns of LEDs and photodiodes for
the optical touch screen. I love it!

I plan to do a deeper dive on this in the future.

![Disconnected front panel without shielding](/assets/hp16500a/blog/27_front_panel_without_shielding.jpg)

**CRT Removal**

The final big item to remove is the CRT unit. It's a Sony CHM-9001-00 with a Trinitron tube.
I will definitely have more to say about it in the future!

![Sony sticker on the CRT](/assets/hp16500a/blog/28_CRT_sticker.jpg)

Remove the 4 screws that fix the CRT to the front top and bottom rails of the chassis:

The CRT claims a 9" active area, which seems about right.

![CRT front screws](/assets/hp16500a/blog/29_CRT_front.jpg)

2 screws in the back fix the CRT unit to the side of the chassis.

![CRT side screws](/assets/hp16500a/blog/30_CRT_side_screws.jpg)

The CRT unit can now slide out through the front. There were some black
metal clips and grey plastic that was a little bit in the way, but after pushing
those aside, it came right out.

**All removed pieces together!**

Here are all the items that have been removed, neatly organized next to each other.

![All removed pieces next to eachother](/assets/hp16500a/blog/31_all_removed_pieces.jpg)

All that's left in the chassis are the back floppy drive and 2 fans. It's a whole lot
lighter now!

# A First Look at the CRT 

* Information from the HP service manual
    * Section 4-5: Color Display Module Adjustment
 	Includes white balance with RV901 and RV902.
    * Page 6-3 System Overview Theory
        120V supply is only used by the color module.
   	CPU board block diagram
    * Page 6-34: Video Signals Check
	Contains connector pinout.
* How the CRT is driven by the logic analyzer
    * CPU board Block diagram 
    * Chips on the CPU board
    * Voltage levels
    * Connector
* CRT PCBs
* CRT resolution: 576x368
    * Aspect ratio: roughly 14:9
    * old school games (donkey kong, pacman etc): 256x224, 8:7 aspect ratio

# The Sony CHM-9001-00 Service Manual

# Main Controller Board

* [HP Bench Briefs](/assets/hp16500a/datasheets/HP-Bench-Briefs-1987-10-12.pdf)
    * Contains a list with translation from HP component ID (e.g. 1820-3431) to 
      manufacturer code (DS75160AN).
* [What is a national stock number (NSN)](https://www.aptac-us.org/national-stock-number/)

* MC68000P10
    * CPU
    * [M68000 8-/16-/32-Bit Microprocessors User’s Manual](/assets/hp16500a/datasheets/MC68000FN10_to_MC68HC001RC8.pdf)
* NE5150F
    * Triple 4-Bit RGB D/A Converter With Memory
    * [Datasheet](/assets/hp16500a/datasheets/NE5150.pdf)
* FDC9793
    * Floppy Disk Controller/Formatter
    * [Datasheet](/assets/hp16500a/datasheets/FDC97_datasheet.pdf)
* FDC9229BT
    * Floppy Disk Interface Circuit
    * [Datasheet](/assets/hp16500a/datasheets/FCD9229BT.pdf)
* TMS9914A
    *  TMS9914A General Purpose Interface Bus (GPIB) Controller
    * [Datasheet](/assets/hp16500a/datasheets/TMS9914A_General_Purpose_Interface_Bus_Controller_Data_Manual_Dec82.pdf)
* 1820-2853 -> MC68A45P
    * CRT Controller
    * Lookup found in [this Bench Brief](http://hparchive.com/Bench_Briefs/HP-Bench-Briefs-1984-05-06.pdf)
    * [Datasheet](/assets/hp16500a/datasheets/mc68A45_datasheet.pdf)
* 20MHz Xtal 
* 1820-3431 -> DS75160AN 
    * IEEE-488 GPIB Transceivers
    * [Datasheet](/assets/hp16500a/datasheets/DS75160AN.pdf)
* PAL16R4-2CN
    * [Datasheet](/assets/hp16500a/datasheets/PAL16R8.pdf)
* 74F195N
    * 4-bit parallel-access shift register
    * [Datasheet](/assets/hp16500a/datasheets/74F195A.pdf)
* NEC D41264C-12
    * Dual-Port Graphics Buffer
    * [Datasheet](/assets/hp16500a/datasheets/NECED001-12A-1.pdf)
* DS14C89A
    * Quad CMOS Receiver
    * [Datasheet](https://www.ti.com/lit/ds/symlink/ds14c89a.pdf)
* DS14C88 
    * Quad CMOS Line Driver
    * [Datasheet](https://www.ti.com/lit/ds/symlink/ds14c88.pdf)
* CY7C122-25PC 
    * 256x4 Static R/W RAM
    * [Datasheet](/assets/hp16500a/datasheets/cy7c122.pdf)
* D27C256-2
    *  256 Kilobit (32,768 x 8-Bit) CMOS EPROM
    * [Datasheet](/assets/hp16500a/datasheets/D27C256.pdf)
* 1818-4036 -> Toshiba TC514256P.P-10 (or -80)
    * 262,144 WORDS X 4 BIT DYNAMIC RAM
    * 8 instances -> 1MB of RAM
    * [Datasheet](/assets/hp16500a/datasheets/TC514256P-85-Toshiba.pdf)
* 1RD2-6001
    * HP-HIL Master Chip
    * See [this list](https://how-to.fandom.com/wiki/How_to_identify_integrated_circuit_(IC)_functions_from_their_Hewlett_Packard_(HP)_number)
    * [HIL bus on Wikipedia](https://en.wikipedia.org/wiki/HIL_bus)
    * [The Hewlett-Packard Human Interface Link](http://www.hparchive.com/Journals/HPJ-1987-06.pdf)
      * Contains detailed protocol information.
      * Talks about the Master Link Controller (MLC) on the main device, and Slave Link
        Controller (SLC) on the individual input devices.
    * [tmk_keyboard on GitHub](https://github.com/tmk/tmk_keyboard/wiki/HP-HIL)
    * [HP-HIL Technical Reference Manual](http://www.bitsavers.org/pdf/hp/hp-hil/45918A-90001_HP-HIL_Technical_Reference_Manual_Jan86.pdf)
    * [Adventures with HP-HIL](http://www.dalton.ax/hpkbd/hil/)
      Implements a HIL to PS/2 keyboard bridge


# References

* [HP 16500A/16501A Service Manual][HP 16500A Service Manual]
* [Sony CHM-9001 Service Manual](/assets/hp16500a/sony-chm-9001-00-service-manual.pdf)

[HP 16500A Service Manual]: /assets/hp16500a/HP16500-90911-Service-Manual.pdf
[CHM-9001 Service Manual]: /assets/hp16500a/sony-chm-9001-00-service-manual.pdf

* [Upgrading a HP 16500A to a HP 16500B](https://www.eevblog.com/forum/testgear/hp-16500a-to-16500b-upgrade/)
* [HP 16500A UPGRADE TO HP 16500B, PART 1](https://repairlab.wordpress.com/2015/02/12/hp-16500a-upgrad-to-hp-16500b/)

# Footnote

Blah Blah[^1]

[^1]: This is a footnote...


